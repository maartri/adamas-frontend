<nz-modal
[(nzVisible)]="isVisible"
[nzTitle]="modalTitle"
[nzContent]="modalContent"
[nzFooter]="modalFooter"
(nzOnCancel)="handleCancel()"
[nzWidth]="1050"
>
<ng-template #modalTitle>Recipient Details</ng-template>

<ng-template #modalContent >
<div class="flexy" style="min-height:25rem;" >

    <div nz-col nzSpan="24">
        <nz-tabset  [nzTabPosition]="'top'" [nzType]="'card'">
            <nz-tab nzTitle="General" (nzClick)="view(0)"> </nz-tab>
            <nz-tab nzTitle="Funding Agreed Services & Careplan" (nzClick)="view(1)"> </nz-tab>
            <nz-tab nzTitle="Case/Progress Notes" (nzClick)="view(2)"></nz-tab>
            <nz-tab nzTitle="Operational Notes" (nzClick)="view(3)"> </nz-tab>            
            <nz-tab nzTitle="Support Workers" (nzClick)="view(4)"> </nz-tab>
            
            
        </nz-tabset>

            

        <div nz-row *ngIf="nzSelectedIndex==0" nzGutter="6">
                <div nz-col nzGutter="1" nzSpan="12" >
                    <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                    [nzData]="lstAddress" [nzLoadingDelay]="3000">
                    
                    <thead >
                        <tr>
                            <th style="background-color: #d7dbe4; color: black" class="left"></th> 
                            <th style="background-color: #d7dbe4; color: black" class="left">Address Details</th> 
                            <th style="background-color: #d7dbe4; color: black" class="left"></th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of lstAddress;let i = index;"  
                        [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
    
                        <td [nzShowCheckbox]="true" [nzChecked]="data.primaryAddress=='1'"></td>    
                        <!-- <td><input type="checkbox" [checked]="data.primaryAddress=='1'"/></td> -->
                        <td class="left" >                                         
                                    {{data.type}}                                                                           
                            </td>
                            <td class="left" >                                         
                                {{data.address}}                                                                           
                        </td>
                        </tr>
                    </tbody>
                    
                    </nz-table> 
                    <nz-table ##basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                    [nzData]="lstphones"  >
                    
                    <thead >
                        <tr>                        
                            <th style="background-color: #d7dbe4; color: black" class="left"></th> 
                            <th style="background-color: #d7dbe4; color: black" class="left" >Contacts Details</th> 
                            <th style="background-color: #d7dbe4; color: black" class="left"></th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of lstphones;let i = index;"  
                        [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                        
                        
                    <td [nzShowCheckbox]="true" [nzChecked]="data.primaryPhone=='True'"></td>    
                        <!-- <td><input type="checkbox" [checked]="data.primaryPhone=='True'"/></td> -->
                        <td class="left" >                                         
                                    {{data.type}}                                                                         
                        </td>
                         <td class="left" >                                         
                                {{data.detail}}                                                                           
                        </td>
                        </tr>
                    </tbody>
                    
                    </nz-table> 
                
                <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                [nzData]="lstNextOfKins" [nzScroll]="{x:'700px', y:'150px'}">
                    <thead >
                        <tr>                        
                            <th style="background-color: #d7dbe4; color: black;" class="left"></th> 
                            <th style="background-color: #d7dbe4; color: black;" class="left" ></th> 
                            <th style="background-color: #d7dbe4; color: black;" class="left">Next of Kin & Other Contacts</th> 
                            <th style="background-color: #d7dbe4; color: black;" class="left"></th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of lstNextOfKins;let i = index;"  
                        [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                                    
                            <td class="left" >                                         
                                        {{data.contact_Type}}                                                                         
                            </td>
                            <td class="left" >                                         
                                    {{data.contact_name}}                                                                           
                            </td>
                            
                            <td class="left" >                                         
                                {{data.phones}}                                                                           
                            </td>
                            <td class="left" >                                         
                                {{data.addressDetails}}                                                                           
                            </td>
                        </tr>
                    </nz-table> 
                     <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                     [nzData]="Info.notes" >
                         <thead >
                             <tr>
                                 <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="alert" nzTheme="outline"></i> Roster Alerts</th> 
                                
                             </tr>
                         </thead>
                         <tbody>
                             <tr>                     
                             <td class="left" >                                
                                
                                <textarea *ngIf="Info.notes" rows="4" nz-input>{{Info.notes}}</textarea>                      
                             </td>                     
                            
                             </tr>                
                     </nz-table> 
                    </div>
                 <div nz-col nzGutter="2" nzSpan="12">
                 
                     <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                     [nzData]="Info.contactIssues" >
                         <thead >
                             <tr>
                                 <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="message" nzTheme="outline"></i> Contact Issues</th> 
                                
                             </tr>
                         </thead>
                         <tbody>
                             <tr>                     
                             <td class="left" >                                
                                
                                <textarea *ngIf="Info.contactIssues" rows="4" nz-input>{{Info.contactIssues}}</textarea>                      
                             </td>                     
                            
                             </tr>                
                     </nz-table> 
                
                    <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                     [nzData]="Info.specialConsiderations" >
                         <thead >
                             <tr>
                                 <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="alert" nzTheme="outline"></i> Runsheet Alerts</th>
                             </tr>
                         </thead>
                         <tbody>
                             <tr>                     
                             <td class="left" >                                
                                <textarea *ngIf="Info.specialConsiderations" rows="4" nz-input>{{Info.specialConsiderations}}</textarea>                      
                             </td>                                                 
                             </tr>                
                     </nz-table> 
                
                     <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                     [nzData]="lstTasks" [nzScroll]="{ y: '250px' }">
                         <thead >
                             <tr>
                                 <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="file-text" nzTheme="outline"> </i> Service Task List</th>
                             </tr>
                         </thead>
                         <tbody>
                            <tr *ngFor="let data of lstTasks;let i = index;"  
                            [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                                        
                                <td class="left" >                                         
                                            {{data.service_Type}}                                                                         
                                </td>
                            </tr>
                        </tbody>        
                     </nz-table> 
                
                </div>
          
            </div>
    
        <div nz-row *ngIf="nzSelectedIndex==1" nzGutter="6">

            
            <label style="padding:10px;  background-color: #002060; color: #ffffff; margin-right: 10px; font-size: 16px;" class="left">Funding Agreed Services & Careplan</label> 

            <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                [nzData]="lstApprovedProgram" [nzScroll]="{ y: '100px' }">
                <thead >
                    <tr>
                        <th style="background-color: #d7dbe4; color: black " class="left"></th>
                        <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="file-text" nzTheme="outline"> </i> Approved Programs</th>                                 
                        <th style="background-color: #d7dbe4; color: black " class="left"></th>
                        <th style="background-color: #d7dbe4; color: black " class="left"></th>
                    </tr>
                </thead>
                <tbody>
                   <tr *ngFor="let data of lstApprovedProgram;let i = index;"  
                   [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                               
                       <td class="left" >                                         
                            {{data.funding_Source}}                                                                         
                       </td>
                       <td class="left" >                                         
                            {{data.program}}                                                                         
                       </td>
                        <td class="left" >                                         
                            {{data.coOrdinator}}                                                                         
                        </td>
                        <td class="left" >                                         
                            {{data.details}}                                                                         
                        </td>
                   </tr>
               </tbody>        
            </nz-table> 
            <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
            [nzData]="lstApprovedServices" [nzScroll]="{ y: '100px' }">
            <thead >
                <tr>
                    <th style="background-color: #d7dbe4; color: black " class="left"></th>
                    <th style="background-color: #d7dbe4; color: black " class="left"> <i nz-icon nzType="file-text" nzTheme="outline"> </i> Approved Services</th>                                 
                    <th style="background-color: #d7dbe4; color: black " class="left"></th>
                    
                </tr>
            </thead>
            <tbody>
               <tr *ngFor="let data of lstApprovedServices;let i = index;"  
               [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                           
                   <td class="left" >                                         
                        {{data.activity}}                                                                         
                   </td>
                   <td class="left" >                                         
                        {{data.funded_Under}}                                                                         
                   </td>
                    <td class="left" >                                         
                        {{data.service_Profile}}                                                                         
                    </td>
               </tr>
           </tbody>        
        </nz-table> 
   
        
        <nz-table #columnTable  [nzPageSize]="5" [nzShowPagination]="false"  [nzLoading]="loading" 
           [nzData]="lstCarerPlans" [nzBordered]="true" >
    <!-- [nzScroll]="{ y: '300px' }" [nzFrontPagination]="true" [nzShowSizeChanger]="true" [nzPaginationPosition]="'top'" [nzPageSizeOptions]="[5, 10, 20,25, 30]" -->
          
    <thead >
        <tr>
            <th colSpan="8" style=" width:100%; background-color: #d7dbe4; color: black " class="left">Current Carer plans</th> 
        </tr>
        <tr>                        
            
            <th  class="left">Paln No.</th> 
            <th  class="left">Paln Name</th> 
            <th  class="left">Start Date</th> 
            <th  class="left">End Date</th> 
            <th  class="left">Co PayAmount</th> 
            <th  class="left">Created By</th> 
            <th  class="left">Detail</th>
            <th  class="left">Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let data of lstCarerPlans;let i = index;"  
             [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                
                <td>{{data.planNumber}}</td>
                <td>{{data.planName}}</td>
                <td>{{data.planStartDate}}</td>
                <td>{{data.planEndDate}}</td>
                <td>{{data.planCoPayAmount}}</td>
                <td>{{data.planCreator}}</td>
                <td>{{data.planDetail}}</td>                      
                
                <td>
                    <a (click)="showEditModal(i)">Update</a>
                    <!-- <nz-divider nzType="vertical"></nz-divider>
                    <a nz-popconfirm nzPopconfirmTitle="Are you sure delete this group?" nzPopconfirmPlacement="bottom"
                        (nzOnConfirm)="delete(i)">Delete</a> -->
                </td>
        </tr>          
    </tbody>
    
    </nz-table> 
   
        </div>

        
        <div nz-row *ngIf="nzSelectedIndex==2" nzGutter="6">
            <gnotes [user]="Person"></gnotes>
         </div>
         <div nz-row *ngIf="nzSelectedIndex==3" nzGutter="6">
            <gnotes [user]="Person"></gnotes>

         </div>
         <div nz-row *ngIf="nzSelectedIndex==4" nzGutter="6">

            
            <label style="padding:10px;  background-color: #002060; color: #ffffff; margin-right: 10px; font-size: 16px;" class="left">Permanently Rostered Staff</label> 

            <nz-table #fixedTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                [nzData]="lstPermanentRosters" [nzScroll]="{x:'600px', y:'250px' }" [nzBordered]="true"> 
                <thead >
                    <tr>
                        <th  nzWidth="50px"  style="background-color: #d7dbe4; color: black " >Start Time</th>
                        <th  nzWidth="50px"  style="background-color: #d7dbe4; color: black " >Duration</th>                                 
                        <th  nzWidth="100px" style="background-color: #d7dbe4; color: black " >Activity</th>
                        <th  nzWidth="50px"  style="background-color: #d7dbe4; color: black " >Staff</th>
                        <th  nzWidth="100px" style="background-color: #d7dbe4; color: black " >Analysis</th>
                        <th  nzWidth="100px" style="background-color: #d7dbe4; color: black " >Program</th>
                        <th  nzWidth="100px" style="background-color: #d7dbe4; color: black " >Dataset Type</th>
                        <th  nzWidth="50px"  style="background-color: #d7dbe4; color: black " >Service Cost</th>
                    </tr>
                </thead>
                <tbody>
                   <tr *ngFor="let data of lstPermanentRosters;let i = index;"  
                   [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">
                                               
                       <td nzWidth="50px"  >                                         
                            {{data.start_Time}}                                                                         
                       </td>
                       <td  nzWidth="50px" >                                         
                            {{data.duration}}                                                                         
                       </td>
                        <td  nzWidth="100px" >                                         
                            {{data.activity}}                                                                         
                        </td>
                        <td  nzWidth="50px" >                                         
                            {{data.staff}}                                                                         
                        </td>
                        <td nzWidth="50px"  >                                         
                            {{data.analysis}}                                                                         
                        </td>
                        <td  nzWidth="100px">                                         
                            {{data.program}}                                                                         
                        </td>
                        <td  nzWidth="100px">                                         
                            {{data.dataset_Type}}                                                                         
                        </td>
                        <td  nzWidth="50px">                                         
                            {{data.service_Cost}}                                                                         
                        </td>
                   </tr>
               </tbody>        
            </nz-table> 
            
            <div nz-row style="padding:10px; background-color: #002060; margin-top: 10px;   margin-right: 10px; font-size: 16px;  display: flex; justify-content: left;"  nz-col="24">
                <label style=" color: #ffffff; width:280px" class="left">Currently Rostered Staff Starting From</label> 
                <!-- <nz-date-picker [nzFormat]="dateFormat" formControlName="date1"></nz-date-picker> -->
                <nz-date-picker [nzFormat]="dateFormat" [(ngModel)]="date1" ></nz-date-picker>
                <label style="padding-left: 5px; padding-right: 5px; color: #ffffff; width:30px"class="left">To</label> 
                <!-- <nz-date-picker [nzFormat]="dateFormat" formControlName="date2"></nz-date-picker> -->
                <nz-date-picker [nzFormat]="dateFormat" [(ngModel)]="date2" ></nz-date-picker>
  
                <button type="button" (click)="load_roster()"><i nz-icon nzType="sync" nzTheme="outline"></i></button>
            </div>
            <nz-table #fixedTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
            [nzData]="lstCurrentRosters" [nzScroll]="{x:'1200px', y:'250px' }" [nzBordered]="true">
            <thead >
                <tr>
                    <th nzWidth="50px" style="background-color: #d7dbe4; color: black " class="left">Date</th>
                    <th nzWidth="50px" style="background-color: #d7dbe4; color: black " class="left">Start Time</th>
                    <th nzWidth="50px" style="background-color: #d7dbe4; color: black " class="left">Duration</th>                                 
                    <th nzWidth="100px" style="background-color: #d7dbe4; color: black " class="left">Activity</th>
                    <th nzWidth="100px" style="background-color: #d7dbe4; color: black " class="left">Staff</th>
                    <th nzWidth="100px" style="background-color: #d7dbe4; color: black " class="left">Analysis</th>
                    <th nzWidth="100px" style="background-color: #d7dbe4; color: black " class="left">Program</th>
                    <th nzWidth="100px" style="background-color: #d7dbe4; color: black " class="left">Dataset Type</th>
                    <th nzWidth="50px" style="background-color: #d7dbe4; color: black " class="left">Service Cost</th>
                </tr>
            </thead>
            <tbody>
               <tr *ngFor="let data of lstCurrentRosters;let i = index;"  
                   [style.background-color]="i == HighlightRow ? '#bbd7fa' : 'white'">                                  
                   
                   <td nzWidth="50px" class="left" >                                         
                        {{data.date}}                     
                    </td>
                    <td nzWidth="50px" class="left" >                                         
                        {{data.start_Time}}                                                                         
                    </td>
                    <td nzWidth="50px" class="left" >                                         
                            {{data.duration}}                                                                         
                    </td>
                    <td nzWidth="100px" class="left" >                                         
                        {{data.activity}}                                                                         
                    </td>
                    <td nzWidth="100px" class="left" >                                         
                        {{data.staff}}                                                                         
                    </td>
                    <td nzWidth="100px" class="left" >                                         
                        {{data.analysis}}                                                                         
                    </td>
                    <td nzWidth="100px" class="left" >                                         
                        {{data.program}}                                                                         
                    </td>
                    <td nzWidth="100px" class="left" >                                         
                        {{data.dataset_Type}}                                                                         
                    </td>
                    <td nzWidth="50px" class="left" >                                         
                        {{data.service_Cost}}                                                                         
                    </td>

            </tr>
           </tbody>        
        </nz-table> 
        </div>

        </div> <!--Tab Div-->
</div>  <!--Modal Div-->
</ng-template>

<ng-template #modalFooter>
    
    <button nz-button nzType="primary" >
        <span>Done</span>
    </button>
     <button nz-button nzType="default" (click)="handleCancel()">Cancel</button> 
    
</ng-template>
</nz-modal>