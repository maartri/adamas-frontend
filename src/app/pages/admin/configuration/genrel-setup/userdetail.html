<div style="padding:8px;">
    <div nz-row>
        <div nz-col>
            <button class="botton success" (click)="showAddModal()"> <i nz-icon nzType="plus" nzTheme="outline"></i> Add User </button>
            <label *ngIf="userRole == 'ADMIN USER'" nz-checkbox id="IncludeDeleted"  [(ngModel)]="check" (change)="fetchAll($event)" style="padding-left: 30%;"> Included Expired Users </label>
            <button nz-button nzType="primary" (click)="handleOkTop()" style="float: right;"> <i nz-icon nzType="file-pdf"></i> Print </button>
            <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading" [nzData]="tableData">
                <thead>
                    <tr>
                        <th class="left">User Name</th>
                        <th class="left">Staff Record</th>
                        <th class="left">Login Mode</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of basicTable.data;let i = index;">
                        <td class="left">{{ data.name  }} </td>
                        <td class="left">{{ data.staffCode }} </td>
                        <td class="left">{{ data.loginMode  }} </td>
                        <td *ngIf="!data.is_deleted">
                            <a (click)="showEditModal(i)">Update</a>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>
    </div>
</div>
<nz-modal [nzWidth]="1300" [(nzVisible)]="modalOpen" [nzTitle]="loadTitle()" (nzOnCancel)="handleCancel()">
    <div class="flexy">
        <nz-tabset  [nzTabPosition]="'top'" [nzType]="'card'">
            <nz-tab nzTitle="General" (nzClick)="tabFindChange(0)"> </nz-tab>
            <nz-tab nzTitle="Viewing Scope" (nzClick)="tabFindChange(1)"> </nz-tab>
            <nz-tab nzTitle="Document Locations" (nzClick)="tabFindChange(2)"></nz-tab>
            <nz-tab nzTitle="Recipient Record View" (nzClick)="tabFindChange(3)"> </nz-tab>
            <nz-tab nzTitle="Staff Record View" (nzClick)="tabFindChange(4)"> </nz-tab>
            <nz-tab nzTitle="Moile T&A" (nzClick)="tabFindChange(5)"> </nz-tab>
            <nz-tab nzTitle="OP Notes" (nzClick)="tabFindChange(6)"> </nz-tab>
            <nz-tab nzTitle="Rostering" (nzClick)="tabFindChange(7)"> </nz-tab>
            <nz-tab nzTitle="Day Manager" (nzClick)="tabFindChange(8)"> </nz-tab>
            <nz-tab nzTitle="Client Portal Setting" (nzClick)="tabFindChange(9)"> </nz-tab>
            <nz-tab nzTitle="Main Menu" (nzClick)="tabFindChange(10)"> </nz-tab>
        </nz-tabset>
    </div>
    <div *ngIf="tabFindIndex == 1">
        <div nz-row>
            <div nz-row [nzGutter]="8">
                <nz-tabset  [nzTabPosition]="'top'"    [nzType]="'card'">
                    <nz-tab nzTitle="Branches"         (nzClick)="tabFindChangeScopes(0)"> </nz-tab>
                    <nz-tab nzTitle="Programs"         (nzClick)="tabFindChangeScopes(1)"> </nz-tab>
                    <nz-tab nzTitle="Categories"       (nzClick)="tabFindChangeScopes(2)"></nz-tab>
                    <nz-tab nzTitle="Coordinators"     (nzClick)="tabFindChangeScopes(3)"> </nz-tab>
                    <nz-tab nzTitle="Reminders"        (nzClick)="tabFindChangeScopes(3)"> </nz-tab>
                    <nz-tab nzTitle="Staff Categories" (nzClick)="tabFindChangeScopes(3)"> </nz-tab>
                </nz-tabset>
            </div>
            
            
            <div *ngIf="tabFindIndexScope == 0">
                <div nz-col class="gutter-row" [nzSpan]="5">
                    <div nz-row  style="border: 1px solid #e8e8e8;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label nz-checkbox
                            [(ngModel)]="allBranches"
                            (ngModelChange)="updateAllCheckedFilters(1)"
                            [nzIndeterminate]="allBranchIntermediate" [ngModelOptions]="{standalone: true}"><b>ALL Branches</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,1)"> 
                                    <div nz-row>
                                        <div nz-col nzSpan="24" *ngFor="let branch of branchesList">
                                            <label nz-checkbox [nzValue]="branch.description" [(ngModel)]="branch.checked" (ngModelChange)="updateSingleCheckedFilters(1)" [ngModelOptions]="{standalone: true}">{{ branch.description }}</label>
                                        </div>
                                    </div>
                                </nz-checkbox-wrapper>   
                            </div>
                        </div>
                    </div>
                </div>
                <div nz-col class="gutter-row" [nzSpan]="5">
                    <div nz-row  style="border: 1px solid #e8e8e8;margin-left:1rem;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label style="color:rgba(0,0,0,.65);"><b>Viewable Depts/Branches</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,1)"> 
                                    <div nz-row>
                                    </div>
                                </nz-checkbox-wrapper>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="clear:both;"></div>
            <div *ngIf="tabFindIndexScope == 1">
                <div nz-col class="gutter-row" [nzSpan]="7">
                    <div nz-row  style="border: 1px solid #e8e8e8;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label nz-checkbox
                            [(ngModel)]="allProgarms"
                            (ngModelChange)="updateAllCheckedFilters(2)"
                            [nzIndeterminate]="allprogramIntermediate" [ngModelOptions]="{standalone: true}"><b>ALL Programs</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,2)">
                                    <div nz-row>
                                        <div nz-col nzSpan="24" *ngFor="let prog of diciplineList">
                                            <label nz-checkbox  [nzValue]="prog.name" [(ngModel)]="prog.checked" (ngModelChange)="updateSingleCheckedFilters(2)" [ngModelOptions]="{standalone: true}">{{ prog.name }}</label>
                                        </div>
                                    </div>
                                </nz-checkbox-wrapper>
                            </div>
                        </div>
                    </div>
                </div>
                <div nz-col class="gutter-row" [nzSpan]="5">
                    <div nz-row  style="border: 1px solid #e8e8e8;margin-left:1rem;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label style="color:rgba(0,0,0,.65);"><b>Viewable Programs</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,1)"> 
                                    <div nz-row>
                                    </div>
                                </nz-checkbox-wrapper>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="tabFindIndexScope == 2">
                <div nz-col class="gutter-row" [nzSpan]="6">
                    <div nz-row  style="border: 1px solid #e8e8e8;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label nz-checkbox
                            [(ngModel)]="allcat"
                            (ngModelChange)="updateAllCheckedFilters(3)"
                            [nzIndeterminate]="allCatIntermediate" [ngModelOptions]="{standalone: true}"><b>ALL Categories</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,4)">
                                    <div nz-row>
                                        <div nz-col nzSpan="24" *ngFor="let manager of categoriesList">
                                            <label nz-checkbox  [nzValue]="manager.description" [(ngModel)]="manager.checked" (ngModelChange)="updateSingleCheckedFilters(4)" [ngModelOptions]="{standalone: true}">{{ manager.description }}</label>
                                        </div>
                                    </div>
                                </nz-checkbox-wrapper>
                            </div>
                        </div>
                    </div>
                </div>
                <div nz-col class="gutter-row" [nzSpan]="5">
                    <div nz-row  style="border: 1px solid #e8e8e8;margin-left:1rem;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label style="color:rgba(0,0,0,.65);"><b>Viewable Depts/Branches</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,1)"> 
                                    <div nz-row>
                                    </div>
                                </nz-checkbox-wrapper>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="tabFindIndexScope == 3">
                <div nz-col class="gutter-row" [nzSpan]="6">
                    <div nz-row  style="border: 1px solid #e8e8e8;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label nz-checkbox
                            [(ngModel)]="allcat"
                            (ngModelChange)="updateAllCheckedFilters(4)"
                            [nzIndeterminate]="allCatIntermediate" [ngModelOptions]="{standalone: true}"><b>ALL CoOrdinators</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,4)">
                                    <div nz-row>
                                        <div nz-col nzSpan="24" *ngFor="let manager of casemanagers">
                                            <label nz-checkbox  [nzValue]="manager.description" [(ngModel)]="manager.checked" (ngModelChange)="updateSingleCheckedFilters(4)" [ngModelOptions]="{standalone: true}">{{ manager.description }}</label>
                                        </div>
                                    </div>
                                </nz-checkbox-wrapper>
                            </div>
                        </div>
                    </div>
                </div>
                <div nz-col class="gutter-row" [nzSpan]="5">
                    <div nz-row  style="border: 1px solid #e8e8e8;margin-left:1rem;">
                        <div nz-row style="background-color:#fafafa;color: white;padding:4px;">
                            <label style="color:rgba(0,0,0,.65);"><b>Viewable CoOrdinators</b></label>
                        </div>
                        <div nz-col>
                            <div class="staff-wrapper" style="height: 30rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-checkbox-wrapper [ngModelOptions]="{standalone: true}" (nzOnChange)="log($event,1)"> 
                                    <div nz-row>
                                    </div>
                                </nz-checkbox-wrapper>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nz-modal>
<nz-drawer [nzWidth]="1000" [nzClosable]="true" [nzVisible]="drawerVisible" nzPlacement="right" [nzTitle]="pdfTitle" (nzOnClose)="handleCancelTop()">
    <div class="col-md-12 spinner" *ngIf="loading">
        <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
    </div>
    <div nz-row>
        <iframe *ngIf="tryDoctype" [src]="tryDoctype" width="950" height="600"></iframe> 
    </div>
</nz-drawer>