<!-- ITEM -->
<nz-modal [(nzVisible)]="itemOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()"> 
    
    <div nz-row *ngIf="itemOpen"> 
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->

                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="itemGroup">
                    <!-- <ul [formGroup]="itemGroup">
                        <li formArrayName="programs" *ngFor="let program of itemGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ itemGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul> -->

                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of itemGroup.get('programs').value;let i = index" [nzValue]="itemGroup.get('programs')['controls'][i].value.program">{{ itemGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                    </div>

                    <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="itemGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1">
                    <div nz-row nzGutter="24" [formGroup]="itemGroup"> 
                        <div nz-col nzSpan="24">
                            <div nz-row>
                                <div nz-col nzSpan="16">
                                    <div class="form-group">
                                        <nz-select formControlName="referralType" style="width:100%" nzAllowClear nzPlaceHolder="Item Type">
                                            <nz-option *ngFor="let item of itemTypes$ | async" [nzValue]="item" [nzLabel]="item"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                            </div>
                            <div nz-row>
                                <div nz-col nzSpan="8">
                                    <div class="form-group">
                                        <nz-date-picker  [nzFormat]="dateFormat" formControlName="suppliedDate" (ngModelChange)="onChange($event)" nzPlaceHolder="Supplied Date"></nz-date-picker>
                                    </div>
                                </div>
                                <div nz-col nzSpan="8">
                                    <div class="form-group">
                                        <input nz-input placeholder="Ref/No" formControlName="refNo" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2">
                    
                    <div nz-row>
                        <div nz-col nzSpan="8" [formGroup]="itemGroup">
                            <div class="form-group">
                                <nz-date-picker [nzFormat]="dateFormat" formControlName="date"  nzPlaceHolder="Date"></nz-date-picker>
                            </div>
                        </div>
                    </div>
                    
                    <div nz-row nzGutter="24" [formGroup]="itemGroup">
                        <div nz-col nzSpan="6">
                            <div class="form-group">
                                <nz-select  nzAllowClear nzPlaceHolder="Quantity" style="width:8rem" formControlName="quantity">
                                    <nz-option *ngFor="let data of quantity" [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                        <div nz-col nzSpan="6">
                            <div class="form-group">
                                <nz-select nzAllowClear nzPlaceHolder="Unit" style="width:8rem" formControlName="unit">
                                    <nz-option *ngFor="let data of unit" [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                    
                    <div nz-row nzGutter="24" [formGroup]="itemGroup">
                        <div nz-col nzSpan="6">
                            <div class="form-group">
                                <input nz-input placeholder="Charge" formControlName="charge"/>
                            </div>
                        </div>
                        <div nz-col nzSpan="6">
                            <div class="form-group">
                                <label nz-checkbox formControlName="gst">GST</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" [formGroup]="itemGroup" nzGutter="32">
                    <div nz-col nzSpan="24">
                        <div class="form-group">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px "></textarea>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>

            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- ADMIN -->

<nz-modal [(nzVisible)]="adminOpen"  [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"  (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="adminOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Admin" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Additional Data" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="adminGroup">
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <ul style="height: 10rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <li formArrayName="programs" *ngFor="let program of adminGroup.get('programs')['controls'];let i = index">
                                    <div [formGroupName]="i">
                                        <label nz-checkbox formControlName="checked"> {{ adminGroup.get('programs')['controls'][i].value.program }}</label>
                                    </div>
                                </li>
                            </ul>
                            <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                        </nz-card>
                    </div>
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="8">
                                    <label>Admission Type</label>
                                </div>
                                <div nz-col nzSpan="16">
                                    <nz-select formControlName="caseCategory" nzAllowClear nzPlaceHolder="Case Note Category" style="width:8rem">
                                        <nz-option *ngFor="let note of noteArray" [nzValue]="note" [nzLabel]="note"></nz-option>
                                    </nz-select>
                                </div>
                            </div>    
                        </nz-card>
                    </div>  
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="8">
                                    <label>Referral Date</label>
                                    <nz-date-picker [nzFormat]="dateFormat" formControlName="referralDate"></nz-date-picker>
                                </div>
                                <div nz-col nzSpan="8" style="padding-right: 5px;">
                                    <label>Time</label>
                                    <nz-time-picker formControlName="time" nzFormat="HH:mm"></nz-time-picker>
                                </div>
                                <div nz-col nzSpan="8">
                                    <label>Time Spent</label>
                                    <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15"  nzFormat="HH:mm"></nz-time-picker>
                                </div>
                            </div>
                        </nz-card>
                    </div>
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="6">
                                    <label class="space-top-3">Note Type</label>
                                    <nz-radio-group formControlName="radioGroup" class="space-top">
                                        <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                        <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                        <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                                    </nz-radio-group>
                                </div>
                                <div nz-col nzSpan="18">
                                    <label>CASE NOTE</label>
                                    <textarea rows="2" nz-input formControlName="notes" style="resize:none;height:10rem;" ></textarea>
                                </div>
                            </div>
                            <!-- <nz-divider></nz-divider>
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="14">
                                    <div class="form-group">
                                        <nz-select formControlName="caseCategory" nzAllowClear nzPlaceHolder="Case Note Category" style="width:8rem">
                                            <nz-option *ngFor="let note of noteArray" [nzValue]="note" [nzLabel]="note"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                                <div nz-col nzSpan="8" class="text-center">
                                    <div class="form-group">
                                        <label nz-checkbox formControlName="publishToApp">Publish To Mobile App</label>
                                    </div>
                                </div>
                            </div> -->
                        </nz-card>
                    </div>
                    <!-- <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24" class="mrg-btm-half">
                                <div nz-col nzSpan="8" class="">
                                    <div class="form-group">
                                        <label>TRACCS Reminder To</label>
                                        <nz-select formControlName="reminderTo" nzAllowClear style="width:8rem">
                                            <nz-option *ngFor="let data of remindersRecipientArray"  [nzValue]="data" [nzLabel]="data"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                                <div nz-col nzSpan="8" class="text-center">
                                    <div class="form-group space-top">
                                        <label nz-checkbox formControlName="publishToApp" > multipleStaff </label>
                                    </div>  
                                </div>
                                <div nz-col nzSpan="8" class="">
                                    <div class="form-group">
                                        <label> Reminder Date </label>
                                        <nz-date-picker formControlName="reminderDate" [nzPlaceHolder]="'Reminder Date'"></nz-date-picker>
                                    </div>  
                                </div>
                            </div>
                            <div nz-col nzSpan="24" class="mrg-btm-half">
                                <div nz-col nzSpan="16" class="">
                                    <div class="form-group">
                                        <label>Email Notification To</label>
                                        <nz-select formControlName="reminderTo" nzAllowClear style="width:8rem">
                                            <nz-option *ngFor="let data of remindersRecipientArray"  [nzValue]="data" [nzLabel]="data"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                                <div nz-col nzSpan="8" class="text-center">
                                    <div class="form-group space-top">
                                        <label nz-checkbox formControlName="publishToApp" > multipleStaff </label>
                                    </div>  
                                </div>
                            </div>
                        </nz-card>
                    </div>                 -->
                </div>
                <div nz-row *ngIf="current == 1">
                    <div [formGroup]="adminGroup">
                        <div class="form-group">  
                            <label for="">Notifications</label>
                            <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                        </div>
                        
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2">
                    <div [formGroup]="adminGroup">
                        <div class="form-group">
                            <label for="">Followup</label>
                            <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3">
                    <div [formGroup]="adminGroup">
                        <div class="form-group">
                            <label for="">Documents</label>
                            <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="doc(notifDocumentsGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 4">
                    <div [formGroup]="adminGroup">
                        <div class="form-group">
                            <label for="">Data List</label>
                            <div *ngFor="let l of datalist"> 
                                <a [href]="l.link" target="_blank">{{l.form}}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div *nzModalFooter>
            <ng-container>
                <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                    <span>Previous</span>
                </button>
                <button nz-button nzType="default" (click)="next()" [disabled]="!canGoNext">
                    <span>Next</span>
                </button>
                <button nz-button nzType="primary" *ngIf="current === 4" (click)="done()" [disabled]="!canBeDone">
                    <span>Accept</span>
                </button>
            </ng-container>
        </div>
        
    </div>
</nz-modal>


<!-- DECEASE -->

<nz-modal [(nzVisible)]="deceaseOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="deceaseOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content" [formGroup]="deceaseGroup">
                <div nz-row *ngIf="current == 0" >
                    <nz-date-picker [nzFormat]="dateFormat" formControlName="deathDate" [nzPlaceHolder]="'Date Of Death'"></nz-date-picker>
                    
                    <div class="space-top">
                        <ul class="no-padding">
                            <li formArrayName="programs" *ngFor="let program of deceaseGroup.get('programs')['controls'];let i = index">
                                <div [formGroupName]="i">
                                    <label nz-checkbox formControlName="checked"> {{ deceaseGroup.get('programs')['controls'][i].value.program }}</label>
                                </div>                               
                            </li>
                        </ul>
                        <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                    </div>
                    
                </div>
                
                <div nz-row *ngIf="current == 1" nzGutter="16">
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <div class="form-group" [formGroup]="deceaseGroup">
                                <nz-select formControlName="reason" nzAllowClear nzPlaceHolder="Reason" style="width:8rem">
                                    <nz-option *ngFor="let data of reasons$ | async" [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <div class="form-group"  [formGroup]="deceaseGroup">
                                <nz-select formControlName="dischargeType" nzAllowClear nzPlaceHolder="Discharge Type" style="width:8rem">
                                    <nz-option *ngFor="let data of dischargeTypes" [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="deceaseGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="dischargeDate" [nzPlaceHolder]="'Referral Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15"  [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" [formGroup]="deceaseGroup" nzGutter="16">
                    <div nz-col nzSpan="24">
                        <div class="form-group" >
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                    
                    <!-- <div nz-col nzSpan="12">
                        <div class="form-group">
                            <nz-select formControlName="caseCategory" nzAllowClear nzPlaceHolder="Case Note Category" style="width:8rem">
                                <nz-option *ngFor="let note of noteArray" [nzValue]="note" [nzLabel]="note"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    
                    <div nz-col nzSpan="8">
                        <div class="form-group">
                            <label nz-checkbox formControlName="publishToApp">Publish To Mobile App</label>
                        </div>
                    </div> -->
                </div>
                
                <!-- <div nz-row *ngIf="current == 4" [formGroup]="deceaseGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="reminderDate" [nzPlaceHolder]="'Reminder Date'"></nz-date-picker>
                        </div>                        
                    </div>  
                    
                    <div nz-row [nzGutter]="16" class="space-btm">
                        <div nz-col nzSpan="8">
                            <div class="form-group">
                                <nz-select formControlName="reminderTo" nzAllowClear nzPlaceHolder="TRACCS Reminder To" style="width:8rem">
                                    <nz-option *ngFor="let data of remindersRecipientArray"  [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                        <div nz-col nzSpan="8">
                            <div class="form-group">
                                <nz-select formControlName="emailNotif" nzAllowClear nzPlaceHolder="Email Notification To" style="width:8rem">
                                    <nz-option *ngFor="let data of remindersRecipientArray"  [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                    <div nz-row [nzGutter]="8" >
                        <div nz-col nzSpan="8">
                            <nz-select formControlName="multipleStaff" nzAllowClear nzPlaceHolder="Multiple Staff" style="width:8rem">
                                <nz-option nzValue="lucy" nzLabel="Lucy"></nz-option>
                            </nz-select>
                        </div>                        
                    </div>
                </div> -->

            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 4" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- REINSTATE -->

<nz-modal [(nzVisible)]="reinstateOpen" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="reinstateOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" >
                    <ul [formGroup]="adminGroup">
                        <li formArrayName="programs" *ngFor="let program of adminGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ adminGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul>
                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1">
                    
                </div>
                
                <div nz-row *ngIf="current == 2">
                    
                </div>
                
                <div nz-row *ngIf="current == 3">
                    
                </div>
            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 3" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 3" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>

<!-- SUSPEND -->

<nz-modal [(nzVisible)]="suspendOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="suspendOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->
                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="suspendGroup">
                    <!-- <ul [formGroup]="suspendGroup">
                        <li formArrayName="programs" *ngFor="let program of suspendGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ suspendGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul> -->

                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of suspendGroup.get('programs').value;let i = index" [nzValue]="suspendGroup.get('programs')['controls'][i].value.program">{{ suspendGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                   </div>

                   <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="suspendGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>
                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1" [formGroup]="suspendGroup">
                    <div nz-row nzGutter="16"> 
                        <div nz-col nzSpan="24">
                            <div class="form-group">
                                <label formControlName="recordFormal" nz-checkbox >Record Formal Recipient ABSENCE to replace rostered shifts</label>
                            </div>
                        </div>
                        <div nz-col nzSpan="24">
                            <div class="form-group">
                                <label formControlName="recordHours" nz-checkbox >Record 24 hours Absence each day</label>
                            </div>
                        </div>
                    </div>
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" formControlName="cancellationCode" nzAllowClear nzPlaceHolder="Cancellation Code">
                                <nz-option *ngFor="let data of cancellationCode$ | async" [nzValue]="data.title" [nzLabel]="data.title"></nz-option>
                            </nz-select>
                        </div>                        
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2">
                    <div class="form-group">
                        <label for="">Suspend Dates Between</label>                        
                        <nz-range-picker></nz-range-picker>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32" [formGroup]="suspendGroup">
                    <div nz-col nzSpan="24">
                        <div class="form-group">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>
                
            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7"  (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>

<!-- DISCHARGE -->

<nz-modal [(nzVisible)]="dischargeOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="dischargeOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->
                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="dischargeGroup">
                    <!-- <ul [formGroup]="dischargeGroup">
                        <li formArrayName="programs" *ngFor="let program of dischargeGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ dischargeGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul> -->
                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of dischargeGroup.get('programs').value;let i = index" [nzValue]="dischargeGroup.get('programs')['controls'][i].value.program">{{ dischargeGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                   </div>

                   <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="dischargeGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1">
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <div class="form-group" [formGroup]="dischargeGroup">
                                <nz-select formControlName="reason" nzAllowClear nzPlaceHolder="Reason" style="width:8rem">
                                    <nz-option *ngFor="let data of dischargeReason$ | async" [nzValue]="data" [nzLabel]="data.description"></nz-option>
                                </nz-select>
                            </div>
                        </div>
                    </div>
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <!-- <div class="form-group"  [formGroup]="dischargeGroup">
                                <nz-select formControlName="dischargeType" nzAllowClear nzPlaceHolder="Discharge Type" style="width:8rem">
                                    <nz-option *ngFor="let data of dischargeTypes" [nzValue]="data" [nzLabel]="data"></nz-option>
                                </nz-select>
                            </div> -->
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="dischargeGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="dischargeDate" [nzPlaceHolder]="'Referral Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32">
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="dischargeGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                    
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>
                
            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>

<!-- WAITLIST -->

<nz-modal [(nzVisible)]="waitListOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="waitListOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>

                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="waitListGroup">
                    <!-- <ul [formGroup]="waitListGroup">
                        <li formArrayName="programs" *ngFor="let program of waitListGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ waitListGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>                        
                    </ul> -->

                   <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of waitListGroup.get('programs').value;let i = index" [nzValue]="waitListGroup.get('programs')['controls'][i].value.program">{{ waitListGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                   </div>

                   <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="waitListGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1">
                    <div class="form-group" [formGroup]="waitListGroup">
                        <nz-select formControlName="activityCode" nzAllowClear nzPlaceHolder="Activity Code" style="width:8rem">
                            <nz-option *ngFor="let data of reasons$ | async" [nzValue]="data" [nzLabel]="data"></nz-option>
                        </nz-select>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="waitListGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="actionDate" [nzPlaceHolder]="'Activity Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3">
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="waitListGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>    
                </div>

                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>

            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- ADMIT -->
<nz-modal [nzStyle]="topBelow" [(nzVisible)]="admitOpen" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    <div nz-row *ngIf="admitOpen">
        <div class="flexy">
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Admission" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>

                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Additional Data" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Auto Roster Creation - Date Selection" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Roster Date selection" nzDescription="" *ngIf="from == 'quote'"></nz-step> -->
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="admitGroup">

                    <div nz-row nzJustify class="mrg-btm-half">
       

                            <!-- <div style="height: 6rem; width: 100%; overflow: auto; padding: .5rem 1rem;">
                                <nz-radio-group formControlName="programChecked">
                                    <label nz-radio *ngFor="let program of admitGroup.get('programs').value;let i = index" [nzValue]="program">{{ admitGroup.get('programs')['controls'][i].value.program }}</label>
                                </nz-radio-group>
                            </div> -->

                            <div class="scroll-overflow">
                                <nz-radio-group formControlName="programChecked">
                                    <label nz-radio *ngFor="let program of admitGroup.get('programs').value;let i = index" [nzValue]="admitGroup.get('programs')['controls'][i].value.program">{{ admitGroup.get('programs')['controls'][i].value.program }}</label>
                                </nz-radio-group>
                           </div>

                            <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
               
                    </div>
                    <!-- <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="8">
                                    <label>Admission Type</label>
                                </div>
                                <div nz-col nzSpan="16">
                                    <nz-select formControlName="admissionType" nzAllowClear>
                                        <nz-option *ngFor="let admissionActivity of admissionActiviType" [nzValue]="admissionActivity" [nzLabel]="admissionActivity"></nz-option>
                                    </nz-select>
                                </div>
                            </div>    
                        </nz-card>
                    </div>  
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-row nzGutter="16">
                                <div nz-col nzSpan="8">
                                    <label>Admission Date</label>
                                    <nz-date-picker formControlName="admissionDate"></nz-date-picker>
                                </div>
                                <div nz-col nzSpan="8" style="padding-right: 5px;">
                                    <label>Time</label>
                                    <nz-time-picker formControlName="time" nzFormat="HH:mm"></nz-time-picker>
                                </div>
                                <div nz-col nzSpan="8">
                                    <label>Time Spent</label>
                                    <nz-time-picker formControlName="timeSpent"  nzFormat="HH:mm"></nz-time-picker>
                                </div>
                            </div>
                        </nz-card>
                    </div>
                    <div nz-row nzJustify class="mrg-btm-half">
                        <nz-card [nzBodyStyle]="{'padding':'5px'}">
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="6">
                                    <label class="space-top-3">Note Type</label>
                                    <nz-radio-group formControlName="radioGroup" class="space-top">
                                        <label nz-radio [nzValue]="'case'">CASE NOTE</label>
                                        <label nz-radio [nzValue]="'op'">OP NOTE</label>
                                        <label nz-radio [nzValue]="'clinical'">CLINICAL NOTE</label>
                                    </nz-radio-group>
                                </div>
                                <div nz-col nzSpan="18">
                                    <label>CASE NOTE</label>
                                    <textarea rows="2" nz-input formControlName="notes" style="resize:none;height:6rem;" ></textarea>
                                </div>
                            </div>
                            <nz-divider></nz-divider>
                            <div nz-col nzSpan="24">
                                <div nz-col nzSpan="14">
                                    <div class="form-group">
                                        <nz-select formControlName="caseCategory" nzAllowClear disabled>
                                            <nz-option [nzValue]="'ADMISSION'" [nzLabel]="'ADMISSION'"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                            </div>
                        </nz-card>
                    </div> -->
                </div>

                <div nz-row *ngIf="current == 1">
                    <p>Admission Type</p>
                    <div>
                        <ng-container>
                            <app-select-list-recipient [program]="admitGroup.get('programChecked').value" [option]="option"></app-select-list-recipient>
                        </ng-container>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="admitGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="admissionDate" [nzPlaceHolder]="'Activity Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32">
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="admitGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>                    
                </div>

                <div nz-row *ngIf="current == 4">
                    <div [formGroup]="admitGroup">
                        <div class="form-group">  
                            <label for="">Notifications</label>
                            <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                            <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                        </div>
                        
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 5">
                    <div [formGroup]="admitGroup">
                        <div class="form-group">
                            <label for="">Followup</label>
                            <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                            <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 6">
                    <div [formGroup]="admitGroup">
                        <div class="form-group">
                            <label for="">Documents</label>
                            <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="doc(notifDocumentsGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                            <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 7">
                    <div [formGroup]="admitGroup">
                        <div class="form-group">
                            <label for="">Data List</label>
                            <div *ngFor="let l of datalist"> 
                                <a [href]="l.link" target="_blank">{{l.form}}</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-row *ngIf="current == 8">
                    <div [formGroup]="admitGroup">
                            <div nz-row class="form-group">
                                <label for="">Date Ranges</label>
                                <nz-range-picker [nzFormat]="dateFormat" formControlName="rosterCreationDates"></nz-range-picker>
                            </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 8" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" (click)="done()" *ngIf="current == 8" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- ASSESS -->
<nz-modal [(nzVisible)]="assessOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="assessOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->
                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="assessGroup">
                    <!-- <ul [formGroup]="assessGroup">
                        <li formArrayName="programs" *ngFor="let program of assessGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ assessGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul> -->

                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of assessGroup.get('programs').value;let i = index" [nzValue]="assessGroup.get('programs')['controls'][i].value.program">{{ assessGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                   </div>

                   <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="assessGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1" [formGroup]="assessGroup">
                    <p>Screening Type</p>
                    <div>
                        <!-- <ng-container *ngFor="let program of checkedPrograms">
                            <app-select-list-recipient [program]="program.program" [option]="option"></app-select-list-recipient>
                        </ng-container> -->

                        <ng-container>
                            <app-select-list-recipient formControlName="serviceType" [program]="assessGroup.get('programChecked').value" [option]="option"></app-select-list-recipient>
                        </ng-container>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="assessGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="date" [nzPlaceHolder]="'Activity Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32">
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="assessGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>                    
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>
                
            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- NOT PROCEED -->

<nz-modal [(nzVisible)]="notProceedOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="notProceedOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>

                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="notProceedGroup">
                    <!-- <ul [formGroup]="notProceedGroup">
                        <li formArrayName="programs" *ngFor="let program of notProceedGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ notProceedGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>
                        </li>
                    </ul> -->
                    
                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of notProceedGroup.get('programs').value;let i = index" [nzValue]="notProceedGroup.get('programs')['controls'][i].value.program">{{ notProceedGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                    </div>

                    <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="notProceedGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                    
                </div>
                
                <div nz-row *ngIf="current == 1">
                    <div nz-row>
                        <!-- <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear nzPlaceHolder="Reason Code"></nz-select>
                        </div> -->
                        <p>Referral Type</p>
                        <div [formGroup]="notProceedGroup">
                            <!-- <ng-container *ngFor="let program of checkedPrograms">
                                <app-select-list-recipient [program]="program.program" [option]="option"></app-select-list-recipient>
                            </ng-container> -->
                            
                            <app-select-list-recipient formControlName="referralType" [program]="notProceedGroup.get('programChecked').value" [option]="option"></app-select-list-recipient>

                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="notProceedGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="date" [nzPlaceHolder]="'Referral Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32">
                    
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="notProceedGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                    
                    <!-- <div nz-col nzSpan="12">
                        <div class="form-group">
                            <nz-select formControlName="caseCategory" nzAllowClear nzPlaceHolder="Unit" style="width:8rem">
                                <nz-option *ngFor="let note of noteArray" [nzValue]="note" [nzLabel]="note"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    
                    <div nz-col nzSpan="12">
                        <div class="form-group">
                            <label nz-checkbox [(ngModel)]="checked">Publish To Mobile App</label>
                        </div>
                    </div> -->
                    
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>

            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- REFER ON -->

<nz-modal [(nzVisible)]="referOnOpen" [nzStyle]="topBelow" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="referOnOpen">
        <div class="flexy">
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>

                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0"  [formGroup]="referOnGroup">
                    <!-- <ul [formGroup]="referOnGroup">
                        <li formArrayName="programs" *ngFor="let program of referOnGroup.get('programs')['controls'];let i = index">
                            <div [formGroupName]="i">
                                <label nz-checkbox formControlName="checked"> {{ referOnGroup.get('programs')['controls'][i].value.program }}</label>
                            </div>                           
                        </li>
                    </ul> -->
                    <div class="scroll-overflow">
                        <nz-radio-group formControlName="programChecked">
                            <label nz-radio *ngFor="let program of referOnGroup.get('programs').value;let i = index" [nzValue]="referOnGroup.get('programs')['controls'][i].value.program">{{ referOnGroup.get('programs')['controls'][i].value.program }}</label>
                        </nz-radio-group>
                   </div>

                   <nz-empty [nzNotFoundContent]="contentTpl" *ngIf="referOnGroup.get('programs').value?.length == 0 && loadPrograms">
                        <ng-template #contentTpl>
                            <span> No Programs </span>
                        </ng-template>
                    </nz-empty>

                    <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin>
                </div>
                
                <div nz-row *ngIf="current == 1" [formGroup]="referOnGroup">
                    <div nz-row class="space-btm">
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear formControlName="referralSource" nzPlaceHolder="Referral To">
                                <nz-option *ngFor="let data of referralSource$ | async"  [nzValue]="data.recordNumber" [nzLabel]="data.description"></nz-option>
                            </nz-select>
                        </div>                        
                    </div>
                    <div nz-row class="space-btm">
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear formControlName="referralCode" nzPlaceHolder="Referrer Code">
                                <nz-option *ngFor="let data of referralCode$ | async"  [nzValue]="data" [nzLabel]="data"></nz-option>
                            </nz-select>
                        </div>                        
                    </div>
                    <div nz-row class="space-btm">
                        <p>Referral Type</p>
                        <div [formGroup]="referOnGroup">
                            <!-- <ng-container *ngFor="let program of checkedPrograms">
                                <app-select-list-recipient [program]="program.program" [option]="option"></app-select-list-recipient>
                            </ng-container> -->
                            <app-select-list-recipient formControlName="referralType" [program]="referOnGroup.get('programChecked').value" [option]="option"></app-select-list-recipient>
                        </div>          
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="referOnGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="date" [nzPlaceHolder]="'Date of Referral'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="32" >
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="referOnGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 4" >
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6">                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>

            </div>
        </div>
        
    </div>
    
    <div *nzModalFooter>
        <ng-container>
            <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
                <span>Done</span>
            </button>
        </ng-container>
    </div>
</nz-modal>


<!-- REFER IN -->

<nz-modal [(nzVisible)]="referInOpen" nzWidth="900" [nzStyle]="{ top: '20px' }" [nzWidth]="800" [nzTitle]="whatOptionVar?.title" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" (nzAfterClose)="handleClose()">
    
    <div nz-row *ngIf="referInOpen">
        <div class="flexy">        
            <nz-steps [nzSize]="'small'" [nzCurrent]="current" nzDirection="vertical">
                <nz-step class="mini" nzTitle="Program " nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Date Details" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Note Details" nzDescription=""></nz-step>
                
                <nz-step class="mini" nzTitle="Notifications" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Followups" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Documents" nzDescription=""></nz-step>
                <nz-step class="mini" nzTitle="Other Required Info" nzDescription=""></nz-step>
                <!-- <nz-step class="mini" nzTitle="Reminders" nzDescription=""></nz-step> -->
            </nz-steps>
            
            <nz-divider class="full-height" nzType="vertical"></nz-divider>
            
            <div class="steps-content">
                <div nz-row *ngIf="current == 0" [formGroup]="referInGroup">
                    <div nz-row nzGutter="16">
                        <div nz-col >
                            <nz-radio-group formControlName="type" (ngModelChange)="referralInChange($event)">
                                <label nz-radio [nzValue]="data.index" *ngFor="let data of referralCheckOptions">{{ data.name }}</label>
                            </nz-radio-group>
                        </div>
                    </div>
                    <div style="margin-top:1rem" nz-row nzGutter="32">
                        <div nz-col nzSpan="14" *ngIf="referInGroup.get('type').value == 1 || referInGroup.get('type').value == 2">
                            <h5>Suggested Package Name(35 CHAR Max)</h5>
                            <input nz-input placeholder="Package Name" formControlName="packageName" oninput="this.value = this.value.toUpperCase()" />
                            <h5 class="available" *ngIf="isPackageNameAvailable == false">Available</h5>
                            <h5 class="unavailable" *ngIf="isPackageNameAvailable">Already Used</h5>
                            <nz-spin nzSimple *ngIf="isPackageNameAvailable == null"></nz-spin>
                        </div>
                        <div nz-col nzSpan="10" *ngIf="referInGroup.get('type').value == 1 || referInGroup.get('type').value == 2">
                            <h5>Package Type/Template</h5>
                            <ul class="no-margin no-padding program-list">
                                <li *ngFor="let program of programs" (click)="selectedProgramChange(program.name)" [class.selected]="selectedProgram == program.name">{{ program.name }}</li>
                            </ul>
                        </div>
                        
                        <div nz-col nzSpan="24" *ngIf="referInGroup.get('type').value == 3 || referInGroup.get('type').value == 4">
                            <ul class="no-margin no-padding program-list">
                                <li *ngFor="let program of programs" (click)="selectedProgramChange(program.name)" [class.selected]="selectedProgram == program.name">{{ program.name }}</li>
                            </ul>
                        </div>
                    </div>
                    <!-- <nz-spin nzSimple *ngIf="loadPrograms" [nzSize]="'small'"></nz-spin> -->
                </div>
                
                <div nz-row *ngIf="current == 1" [formGroup]="referInGroup">
                    <div nz-row class="space-btm">
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear formControlName="referralSource" nzPlaceHolder="Referral Source">
                                <nz-option *ngFor="let data of referralSource$ | async"  [nzValue]="data" [nzLabel]="data"></nz-option>
                            </nz-select>
                        </div>                        
                    </div>
                    <div nz-row class="space-btm">
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear formControlName="referralCode" nzPlaceHolder="Referrer Code">
                                <nz-option *ngFor="let data of referralCode$ | async"  [nzValue]="data" [nzLabel]="data"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    <div nz-row class="space-btm">
                        <div nz-col nzSpan="12">
                            <nz-select style="width:100%" nzAllowClear formControlName="referralType" nzPlaceHolder="Referral Type">
                                <nz-option *ngFor="let data of referralType$ | async"  [nzValue]="data" [nzLabel]="data"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 2" [formGroup]="referInGroup">
                    <div nz-row [nzGutter]="8" class="space-btm">
                        <div nz-col nzSpan="8">
                            <nz-date-picker [nzFormat]="dateFormat" formControlName="date" [nzFormat]="dateFormat" [nzPlaceHolder]="'Referral Date'"></nz-date-picker>
                        </div>                        
                    </div>
                    <div nz-row [nzGutter]="8">
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="time" [nzPlaceHolder]="'Time'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                        <div nz-col nzSpan="8">
                            <nz-time-picker formControlName="timeSpent" [nzMinuteStep]="15" [nzPlaceHolder]="'Time Spent'" nzFormat="HH:mm"></nz-time-picker>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 3" nzGutter="16">
                    <div nz-col nzSpan="24">
                        <div class="form-group" [formGroup]="referInGroup">
                            <nz-radio-group formControlName="radioGroup">
                                <label nz-radio [nzValue]="'CASENOTE'">CASE NOTE</label>
                                <label nz-radio [nzValue]="'OPNOTE'">OP NOTE</label>
                                <label nz-radio [nzValue]="'CLINOTE'">CLINICAL NOTE</label>
                            </nz-radio-group>
                            
                            <textarea rows="4" nz-input formControlName="notes" style="margin:15px 0"></textarea>
                        </div>
                    </div>
                </div>
                
                <div nz-row *ngIf="current == 4" [formGroup]="referInGroup">
                    <label for="">Notifications</label>
                    <nz-checkbox-group [(ngModel)]="notifCheckBoxes" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifCheckBoxes?.length == 0" nzMessage="No Notifications"></nz-alert>
                </div>            

                <div nz-row *ngIf="current == 5" [formGroup]="referInGroup">
                    <label for="">Followups</label>
                    <nz-checkbox-group [(ngModel)]="notifFollowUpGroup" (ngModelChange)="followup(notifFollowUpGroup)" [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifFollowUpGroup?.length == 0" nzMessage="No Followups"></nz-alert>
                </div>     

                <div nz-row *ngIf="current == 6" [formGroup]="referInGroup">
                    
                    <label for="">Documents</label>
                    <nz-checkbox-group [(ngModel)]="notifDocumentsGroup" (ngModelChange)="notif(notifCheckBoxes)"  [ngModelOptions]="{standalone: true}"></nz-checkbox-group>
                    <nz-alert nzType="warning" *ngIf="notifDocumentsGroup?.length == 0" nzMessage="No Documents"></nz-alert>
                </div>    

                <div nz-row *ngIf="current == 7" [formGroup]="referInGroup">
                    <label for="">Other Required Info</label>

                    <div *ngFor="let l of datalist"> 
                        <a [href]="l.link" target="_blank">{{l.form}}</a>
                    </div>

                    <nz-alert nzType="warning" *ngIf="datalist?.length == 0" nzMessage="No Other Infos"></nz-alert>                   
                </div>

        </div>
    </div>    
</div>

<div *nzModalFooter>
    <ng-container>
        <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
            <span>Previous</span>
        </button>
        <button nz-button nzType="default" (click)="next()" *ngIf="current < 7" [disabled]="!canGoNext">
            <span>Next</span>
        </button>
        <button nz-button nzType="primary" *ngIf="current === 7" (click)="done()" [disabled]="!canBeDone">
            <span>Done</span>
        </button>
    </ng-container>
</div>
</nz-modal>




