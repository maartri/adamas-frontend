<div nz-row>
    <div style="padding-left:8px" >
        
        <div nz-row class="dm-input">
            <div nz-col nzSpan="5" style="margin-left: 5px; margin-top: 5px; ">
                <label for="" > Day Manager Filter</label>
                <nz-select  [(ngModel)]="selectedPersonType" (ngModelChange)="personTypeChange($event)" style="width: 200px;">
                    <nz-option *ngFor="let p of personTypeList" [nzValue]="p"  [nzLabel]="p"></nz-option>
                </nz-select>
            </div>
            <div nz-col nzSpan="4" class="date-title" *ngIf="master" style="margin: 5px; width:200px  ">
                <label for="date"> Cycle</label>
                <nz-select style="width:200px" [(ngModel)]="masterCycle" (ngModelChange)="setCycle()">                   
                    <nz-option *ngFor="let cl of cycles" [nzValue]="cl.cycle" [nzLabel]="cl.cycle"></nz-option>
                </nz-select>
            </div>
            <div nz-col nzSpan="3" *ngIf="!master" style=" margin-top: 5px;">
                <label for="date"> Date</label>
                <nz-date-picker nzMode="default" [nzFormat]="dateFormat" [(ngModel)]="date"></nz-date-picker>
            </div>
            <div nz-col nzSpan="3" *ngIf="!master" style="margin-left: 5px; margin-top: 5px;">
                <label for="dayview" >Day View</label>
                <nz-select [(ngModel)]="dayView">
                    <nz-option *ngFor="let no of dayViewArr" [nzValue]="no" [nzLabel]="no"></nz-option>
                </nz-select> 
            </div>
            <div nz-col nzSpan="2" id="divMaster" style=" margin-top: 5px;  width:80px" >
                <label for="dayview" >Master</label>
                <!--                     
                    <nz-label style="padding:4px; background-color: transparent; color: white; vertical-align: middle"> {{Master_Roster_label}}  </nz-label> -->
                <div [ngStyle]="{'background-color':master === true ? '#F18805' : '#85B9D5' }" style=" background-color:  #1E91E8; vertical-align: middle; height: 32px; width:80px;  border-radius: 3px;   color: grey; padding-left: 2px; text-align: center;">
                    <nz-switch  [class.master-class]="master" [(ngModel)]="master" style="padding:4px;  vertical-align: middle" (ngModelChange)="setMasterRoster($event)"></nz-switch>
                </div>
            </div>
            <div nz-col nzSpan="10" style="margin-top: 25px; text-align: center;" > 
                
                    <button nz-button nzType="default"  (click)="showCustomFilter()" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Create a new custom filter to limit activities to operator requirements"><i nz-icon nzType="filter" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  (click)="removeCustomFilter()" [disabled]="CustomFilters.length<=0" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Delete ALL custom filters"><i nz-icon nzType="close-circle" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  (click)="ViewCustomFilter()" [disabled]="CustomFilters.length<=0" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="View existing custom filters"><i nz-icon nzType="question-circle" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  (click)="load_rosters()" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Refresh the current Day Manager view"><i nz-icon nzType="reload" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  (click)="ViewQuickFilterDisplay()" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Quiick Filters"><i nz-icon nzType="interaction" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Print the Day Manager"><i nz-icon nzType="printer" nzTheme="outline" ></i></button>                   
                    <button nz-button nzType="default"  (click)="openStaffModal(true)" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Display Staff Inquiry Screen"><i nz-icon nzType="team" nzTheme="outline" ></i></button>
                    <button nz-button nzType="default"  (click)="openRecipientModal(true)" [nzSize]="size" nzShape="circle" nz-tooltip nzTooltipTitle="Display Recipient Inquiry Screen"><i nz-icon nzType="user" nzTheme="outline"></i></button>
                    <button nz-button nzType="default"  (click)="openMenu()"  [nzSize]="size" nzShape="circle"><i nz-icon nzType="menu" nzTheme="outline"></i></button>
              
            </div>
            <div *ngIf="CustomFilter" >
             
                <div nz-col nzSpan="5" style="margin-left: 2px;">
                    <label for="dayview">Limit To</label>
                    <nz-select [(ngModel)]="LimitTo" style="width: 200px;" (ngModelChange)="FillLimitTo()">
                        <nz-option *ngFor="let grp of lstGroup" [nzValue]="grp" [nzLabel]="grp"></nz-option>
                    </nz-select> 
                </div>
              
                <div nz-col nzSpan="6">
                    <label for="">Starting With</label>
                    <nz-select [(ngModel)]="startWith"  *ngIf="!showSimpleFilterInput"   style="width: 250px;" (ngModelChange)="AddCustomFilter()">
                        <nz-option *ngFor="let t of lstStartWith" [nzValue]="t.title" [nzLabel]="t.title"></nz-option>
                    </nz-select> 
                    <nz-input-group *ngIf="showSimpleFilterInput" >                      
                        <input nz-input  placeholder="{{nzFilterPlaceHolder}}" [(ngModel)]="startWith" style="width: 230px;" />
                        
                            <button nz-button nzType="default"  (click)="AddCustomFilter()"  [nzSize]="'default'" nz-tooltip nzTooltipTitle="Add in Filter">
                                <i nz-icon nzType="border-inner" nzTheme="outline" ></i>
                            </button>
                         
                    </nz-input-group >
                    <!-- <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
                        <input type="text" nz-input placeholder="input search text" />
                      </nz-input-group>
                      <ng-template #suffixIconButton>
                        <button nz-button nzType="default" nzSearch><i nz-icon nzType="border-inner"></i></button>
                      </ng-template> -->
                </div>
                <div nz-col nzSpan="6" style="margin-top: 10px;">
                    <div>
                        <label nz-checkbox [(ngModel)]="addInExisting" style="margin-right: 10px;">Add in existing filter</label> 
                    </div>
                    <button nz-button nzType="primary"  (click)="ApplyCustomFilter()"  [nzSize]="'small'" nzShape="round"><i nz-icon nzType="filter" nzTheme="outline"></i>Apply</button>
                    <button nz-button nzType="primary"  (click)="CloseCustomFilter()"  [nzSize]="'small'" nzShape="round"><i nz-icon nzType="close" nzTheme="outline"></i>Close</button>
                    <button nz-button nzType="primary"  (click)="ViewCustomFilter()"  [nzSize]="'small'" nzShape="round"><i nz-icon nzType="view" nzTheme="outline"></i>View</button>
                </div>
               
            </div>
        </div>
        
        <nz-modal  [nzStyle]="{ top: '10px' }" hasBackdrop [nzWidth]="900" [(nzVisible)]="ViewExistingFilter" nzTitle="Day Manager Filters"   (nzOnCancel)="ViewExistingFilter = false" >
            <div  class="flexy" style="min-height:25rem; margin-top: 5px;" >
                <div nz-row >
                    <div nz-row *ngFor="let fltr of CustomFilters; let i=index">
                        <div>
                                {{i+1}} - {{fltr.key}} = {{fltr.value}}
                        </div>
                    </div>
                </div>
            </div>
            <div *nzModalFooter>
                <button  nz-button nzType="default" (click)="ViewExistingFilter=false">OK</button>
                <button  nz-button nzType="default" (click)="ViewExistingFilter=false">Cancel</button>
            </div>
        </nz-modal>                 
           
        <nz-modal  [nzStyle]="{ top: '10px' }" hasBackdrop [nzWidth]="700" [(nzVisible)]="showMenu" nzTitle="Day Manager Options"   (nzOnCancel)="showMenu = false" >
        <div  class="flexy" style="min-height:20rem; margin-top: 5px;" >
            <div nz-row >
                <div nz-col nzSpan="24"  >
                   
                    <div *ngFor="let opt of optionsList; let i=index">
                        <label nz-checkbox [(ngModel)]="optionsList[i].checked" >{{opt.name}}</label> 
                    </div>
                   
                    <div style="margin-top: 20px;">
                        <label for="">Set Rostering Pay Preriod</label> 
                        <nz-date-picker [(ngModel)]="PayPeriodEndDate" [nzFormat]="dateFormat" ></nz-date-picker>
                    </div>
                </div>
            </div>
        
            <div nz-row >
                <div nz-col nzSpan="24" >
                    <div *ngFor="let opt of optionsList2; let i=index">
                        <label nz-checkbox [(ngModel)]="optionsList2[i].checked" >{{opt.name}}</label> 
                    </div>
                </div>
            </div>       

        </div>
            <div *nzModalFooter>
                <button  nz-button nzType="default" (click)="menuAction()">Save & Apply</button>
                <button  nz-button nzType="default" (click)="showMenu=false">Cancel</button>
            </div>
        </nz-modal>
       
        <nz-modal  [nzStyle]="{ top: '10px' }" hasBackdrop [nzWidth]="900" [(nzVisible)]="viewQuickFilter" nzTitle="Quick Filters Benchtop"   (nzOnCancel)="viewQuickFilter = false" >
            <div  class="flexy" style="min-height:25rem; " >
                <div nz-row  nzGutter="4">   
                            
                        <div nz-col nzSpan="8" >
                            <nz-table  #basicTable [nzData]="branchesList" [nzShowPagination]="false" [nzBordered]="true"  [nzScroll]="{x:'250px', y:'350px' }">
                                <thead>
                                  <tr>
                                         <th colSpan="2" style="font-weight: bold;">Branches</th>                                  
                                  </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td colSpan="2" >
                                        <label nz-checkbox [(ngModel)]="AllBranches" (nzCheckedChange)="onAllChecked($event,'Branch')">All Branches</label>
                                    </td>
                                </tr>
                                <tr *ngIf="!AllBranches">
                                   <td>
                                    <tr  *ngFor="let data of branchesList">                                   
                                        <td nzWidth="50px" >
                                            <label nz-checkbox [nzChecked]="this.selectedBranches.indexOf(data)>=0"  (nzCheckedChange)="onItemChecked(data, $event,'Branch')" ></label>
                                        </td>
                                        <td  nzWidth="200px">{{ data.title }}</td>                                    
                                    
                                        </tr>
                                    </td>
                                </tr>
                                </tbody>
                              </nz-table>
                        </div>
                        <div nz-col nzSpan="8" >
                            <nz-table  #basicTable [nzData]="programsList" [nzShowPagination]="false" [nzBordered]="true"  [nzScroll]="{x:'250px', y:'350px' }">
                                <thead>
                                    <tr >
                                            <th style="font-weight: bold;" colSpan="2" >Programs</th>                                  
                                    </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td colSpan="2" >
                                        <label nz-checkbox [(ngModel)]="AllPrograms" (nzCheckedChange)="onAllChecked($event,'Program')">All Programs</label>
                                    </td>
                                </tr>
                                <tr *ngIf="!AllPrograms">
                                  <td>
                                    <tr *ngFor="let data of programsList">                                        
                                        <td nzWidth="50px">
                                            <label nz-checkbox [nzChecked]="this.selectedPrograms.indexOf(data)>=0"  (nzCheckedChange)="onItemChecked(data, $event,'Program')" ></label>
                                        </td>
                                        <td nzWidth="200px">{{ data.title }}</td>                                        
                                    </tr>
                                    </td>
                                </tr>
                              </tbody>
                             </nz-table>
                        </div>
                        <div nz-col nzSpan="8" >
                            <nz-table  #basicTable [nzData]="activityList" [nzShowPagination]="false" [nzBordered]="true"  [nzScroll]="{x:'250px', y:'350px' }">
                                <thead>
                                    <tr>
                                            <th style="font-weight: bold;" colSpan="2" >Activities</th>                                  
                                    </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td colSpan="2" >
                                        <label nz-checkbox [(ngModel)]="AllActivities" (nzCheckedChange)="onAllChecked($event,'Activity')">All Activities</label>
                                    </td>
                                </tr>
                                <tr *ngIf="!AllActivities">
                                    <td>
                                        <tr *ngFor="let data of activityList">
                                        
                                            <td nzWidth="50px">
                                                <label nz-checkbox [nzChecked]="this.selectedActivities.indexOf(data)>=0"  (nzCheckedChange)="onItemChecked(data, $event,'Activity')" ></label>
                                            </td>
                                            <td nzWidth="200px">{{ data.title }}</td>
                                        </tr>
                                    </td>
                                 </tr>
                                </tbody>
                                </nz-table>
                        </div>
                </div>  
            </div>
            <div *nzModalFooter>
                <button  nz-button nzType="default" (click)="ApplyQuickFilter()">Apply</button>
                <button  nz-button nzType="default" (click)="viewQuickFilter=false">Cancel</button>
            </div>
         </nz-modal>
           
    </div>
    <div>
        <dm-calendar [startDate]="date" [dayView]="dayView" [reload]="reload" [personType]="selectedPersonType"  [copyPaste]="toBePasted?.length > 0"
            (showDetail)="showDetail($event)" (showOptions)="showOptions($event)" (highlighted)="highlighted($event)" [master]="master"
            (data)="data($event)" (paste)="pasteSelectedRecords($event)" [applyFilter]="applyFilter" [dmOptions]="dmOptions"></dm-calendar>
    </div>
   
</div>
<recipientexternal [isVisible]="recipientexternal" [AccountNo]="selected_data" (recipientexternalDone)="cancelRecipientExternal($event)" *ngIf="recipientexternal"></recipientexternal>
     
<staffexternal [isVisible]="staffexternal" [AccountNo]="selected_data" (staffexternalDone)="cancelStaffExternal($event)" *ngIf="staffexternal"></staffexternal>
<shiftdetail  (timesheetDone)="shiftChanged($event)" ></shiftdetail>



<nz-modal class="options" [nzStyle]="{ top: '15px' }" [(nzVisible)]="optionsModal" nzTitle="Day Manager" (nzOnCancel)="optionsModal = false" 
    style="background-color: #002060; margin-top: 5px; color: white;">
   
    <div  nz-row style="background-color: #fff; margin-top: 5px; ">
        <ul >
            <li class="listitem" *ngIf="selectedOption" (click)="toMap()">Display Route Map</li>
            <li class="listitem" *ngIf="displayOption"  (click)="ViewRecipientDetails.next(1)">View Recipient Details</li>
            <li class="listitem" *ngIf="displayOption" (click)="ViewRecipientDetails.next(2)" >View Service Shift Notes</li>
            <hr/>
            <li class="listitem" *ngIf="selectedStaff!='BOOKED' && displayOption" (click)="AllocateView.next(1)">Un-Allocate Staff</li>
            <li class="listitem" *ngIf="displayOption" (click)="AllocateView.next(2)">Allocate Staff</li>
            <li class="listitem" *ngIf="displayOption" (click)="ViewChangeDayTime.next(1)"> Change Day or Times</li>
            <hr/>
            <li class="listitem" (click)="AddRoster()" >Add NEW Staff Activity / View Shift and Gaps</li>
            <li class="listitem" (click)="AddRoster()">Add NEW Recipient Activity / View Daily Services</li>
            <li class="listitem" (click)="AddRoster()" >My Diary / Appointments - Day View</li>
            <hr/>
            <li class="listitem" *ngIf="displayOption" (click)="openCaseLoad()">Set Caseload Name</li>
            <li *ngIf="displayOption" (click)="openAllocateResource()">Allocate Resource</li>
            <li class="listitem" *ngIf="displayOption" >Change <i nz-icon nzType="right" nzTheme="outline"></i>
                <ul class="listitem" >
                    <li (click)="changeModalView.next(1)">Change Output Type</li>
                    <li (click)="changeModalView.next(2)">Change Program</li>
                    <li (click)="changeModalView.next(3)">Change Activity</li>
                    <li (click)="changeModalView.next(4)">Change Pay Type</li>
                    <li (click)="changeModalView.next(5)">Change Pay Quantity</li>
                    <li (click)="changeModalView.next(6)">Set Unit Cost</li>
                    <li (click)="changeModalView.next(7)">Change Debtor</li>
                    <li (click)="changeModalView.next(8)">Change Bill Amount</li>
                    <li (click)="changeModalView.next(9)">Change Bill Quantity</li>
                    <li (click)="changeModalView.next(10)">Change Dataset Quantity</li>
                   
                </ul>
            </li>
            <hr *ngIf="displayOption">
            <li *ngIf="displayOption" class="listitem" >View <i nz-icon nzType="right" nzTheme="outline"></i>
                <ul class="listitem">
                    <li (click)="ViewDetails.next(1)">View Recipient Details</li>                    
                    <li (click)="ViewDetails.next(2)">View Staff Details</li>
                    <li (click)="ViewDetails.next(3)">View Extra/Additional Info</li>
                    <li (click)="ViewDetails.next(4)">View Shift/Service Details</li>
                  
                </ul>
            </li>
            <hr>
            <li *ngIf="displayOption" class="listitem" (click)="ViewNudge.next(1)">Nudge Up</li>
            <li *ngIf="displayOption" class="listitem" (click)="ViewNudge.next(2)">Nudge Down</li>
            <li *ngIf="displayOption" class="listitem" (click)="OperationView.next(1)">Copy</li>
            <li *ngIf="displayOption" class="listitem" (click)="OperationView.next(2)">Cut</li>
            <li *ngIf="selectedOption" class="listitem" (click)="OperationView.next(3)">Paste</li>
            <li *ngIf="displayOption" class="listitem" (click)="OperationView.next(4)">Delete Shift/Service</li>
            <li *ngIf="displayOption" class="listitem" (click)="OperationView.next(5)">Delete Additional Information(Xtra Info) </li>
            <hr>
            <li *ngIf="displayOption" class="listitem" (click)="ApproveView.next(1)">Approve</li>
            <li *ngIf="displayOption" class="listitem" (click)="ApproveView.next(2)">Un-Approve</li>
           
            
        </ul>
    </div>
    <div *nzModalFooter>
        <!-- <span>Modal Footer: </span>
        <button nz-button nzType="default" (click)="handleCancel()">Custom Callback</button>
        <button nz-button nzType="primary" (click)="handleOk()" [nzLoading]="isConfirmLoading">Custom Submit</button> -->
      </div>
  </nz-modal>

  <nz-modal [nzStyle]="{ top: '15px' }" [(nzVisible)]="ViewAdditionalModal" nzTitle="View Additional Info" (nzOnCancel)="ViewAdditionalModal = false" >
    <div nz-row>
        <!-- <div class="form-group" *ngIf="selected?.option === 1"> -->
           <label for=""> Date: {{date | date : 'dd/MM/yyyy'}}   Start Time: {{defaultStartTime}}  Activity: {{serviceType}}</label>
           <input type="text" [value]="notes"  style="width:450px; height:200px" id="txtnotes" #box>
        <!-- </div> -->
    </div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveAdditionalInfo(box.value)">Save</button>
        <button nz-button nzType="default" (click)="ViewAdditionalModal=false">Cancel</button>
    </div>
</nz-modal>

  
<nz-modal [nzStyle]="{ top: '15px' }" [(nzVisible)]="recipientDetailsModal" nzTitle="Recipients Details" (nzOnCancel)="recipientDetailsModal = false" >
    <div nz-row>
        sd
    </div>
 <div *nzModalFooter>
        <button nz-button nzType="default" >Cancel</button>
    </div>
  </nz-modal>
    <nz-modal [nzStyle]="{ top: '15px' }" [(nzVisible)]="show_alert" nzTitle="Alert Staff" (nzOnCancel)="show_alert = false" >
      
        <!-- <div class="flexy" style="min-width:21rem; padding-left:20px;">
            <form [formGroup]="AlertForm" class="form-group">
         -->
            <div nz-row >
                <div nz-col nzSpan="24" style="padding-left: 5px;">                  
                    <nz-label style="padding: 2px;" >Alert Staff: if Yes: Please review the following message to be sent: </nz-label >              
                </div>
            </div>
        
            <div nz-row>
                <div nz-col nzSpan="24" style="padding-top: 10px; padding-left: 5px;" >
                    <nz-label style="margin-left: 3px;">Subject </nz-label >                                 
                    <input id="txtSubject"  style="margin-top: 5px;" nz-input [(ngModel)]="txtAlertSubject"/>                       
                </div>  
            </div>
            <div nz-row > 
            <div nz-col nzSpan="24" style="padding-top: 10px; padding-left: 5px;" > 
                <nz-label style="margin-left: 3px;" >Message </nz-label >    
                <textarea id="txtMessage" style="margin-top: 5px; height:200px;" nz-input [(ngModel)]="txtAlertMessage"> </textarea>                 
               
            </div>
        </div>    
   
    
        
        <div *nzModalFooter>
                <button nz-button nzType="default"  (click)="generate_alert()">Yes</button>
                <button nz-button nzType="default"  (click)="show_alert=false">No</button>
        </div>
        
    </nz-modal>
    <nz-modal [nzStyle]="{ top: '15px' }" [(nzVisible)]="breachRoster" nzTitle="Roster Validation" (nzOnCancel)="breachRoster = false" >
      
        <div class="flexy" style="min-height:3rem">
         
            <div>
                <label style="font-size:14px; " > {{Error_Msg}} <br/> Are you sure you want to continue roster addition/change </label>
               
            </div>
        </div>
   
    
    <div *nzModalFooter>
        <button   nz-button nzType="default"  (click)="ProceedBreachRoster()">Yes</button>
        <button   nz-button nzType="default"  (click)="Cancel_ProceedBreachRoster()">No</button>
    </div>
</nz-modal>

 <nz-modal [nzStyle]="{ top: '15px' }" [(nzVisible)]="AllocateStaffModal" nzTitle="Select Staff from below Staff List" (nzOnCancel)="AllocateStaffModal = false" >
    <div class="flexy" style="min-height:10rem">
        <div nz-row>
            <div nz-col nzSpan="6" style="margin-top: 10px; margin-bottom: 20px; width:400px">
            
                <div>
                    <nz-input-group nzAddOnAfterIcon="search" (click)="openStaffModal()" >
                        <input placeholder="Search Staff" type="text" nz-input [(ngModel)]="selectedCarer" [disabled]="true"/>
                      </nz-input-group>               
                </div>
          
                <!-- <app-search-list [reload]="reloadVal" [view]="1" [(ngModel)]="sample" (ngModelChange)="listChange($event)"></app-search-list> -->

                       
            </div>
            <div>
                <label *ngIf="selectedCarer" >Re-Allocate Staff : </label>
                <label  id="lblStaff" >
                {{selectedCarer}}
                </label>
            </div>
        </div>
    </div> 
    <div *nzModalFooter>
        <button nz-button nzType="default"  (click)="reAllocate()">Allocate</button>
        <button nz-button nzType="default"  (click)="AllocateStaffModal=false">Cancel</button>
    </div>
</nz-modal> 
<staff-search [findModalOpen]="openSearchStaffModal" [bookingData]="bookingData"  (searchDone)="onStaffSearch($event)"></staff-search>
<recipient-search [findModalOpen]="openSearchRecipientModal" [bookingData]="bookingDataRecipient" (searchDone)="onRecipientSearch($event)"></recipient-search>


<nz-modal [nzStyle]="{ top: '15px' }" [nzWidth]="900" [(nzVisible)]="ViewServiceNoteModal" nzTitle="Service / Shift Notes "   (nzOnCancel)="ViewServiceNoteModal = false" >
    <div class="flexy" style="min-height:25rem;">
        <gnotes #gn [user]="Person" [loadNote]="loadingNote" ></gnotes>
    </div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="gn.search(Person)">Refresh</button>
        <button nz-button nzType="default" (click)="ViewServiceNoteModal=false">Cancel</button>
    </div>
</nz-modal>

<nz-modal [nzStyle]="{ top: '15px' }" [nzWidth]="600" [(nzVisible)]="ViewChangeDayTimeModal" nzTitle="Change Day / Time "   (nzOnCancel)="ViewChangeDayTimeModal = false" >
    <div  class="flexy" style="min-height:15rem;" [formGroup]="DateTimeForm">
        <div nz-row nzGutter="8">
            <div nz-row style="padding-top: 10px; padding-left: 5px; ">
                <div  nz-col  nzSpan="24"  >
                    <nz-label style="margin-left: 3px;" *ngIf="selectedOption">{{selectedOption.startTime}} - {{selectedOption.endTime}} * {{selectedOption.rProgram}} : {{selectedOption.activity}} </nz-label >                                
                                        
                </div>  
            </div> 
            
            <div nz-row [formGroup]="DateTimeForm" class="rectangle">
                <div nz-col nzSpan="6"  >
                    <div class="form-group">
                        <label for="">Date</label>
                        <nz-date-picker  [nzFormat]="dateFormat" formControlName="rdate"></nz-date-picker>
                    </div>
                </div>
                <div  nz-col nzSpan="6"  >
                    
                        <div class="form-group">
                            <label for="">Start Time</label>
                            <nz-time-picker  [(ngModel)]="defaultStartTime" [ngModelOptions]="{standalone: true}"  (ngModelChange)="ngModelChangeStart($event)"  nzFormat="HH:mm"></nz-time-picker>
                        </div>
                </div>
                <div nz-col nzSpan="6"  >
                        <div class="form-group" >
                            <label for="">End Time</label>
                            <nz-time-picker  [(ngModel)]="defaultEndTime"  [ngModelOptions]="{standalone: true}" (ngModelChange)="ngModelChangeEnd($event)" nzFormat="HH:mm"></nz-time-picker>
                        </div>
               </div>
               <div nz-col nzSpan="6"  >
                        <div class="form-group">
                            <label for="">Duration</label>
                            <nz-alert *ngIf="durationObject?.error" nzType="error" [nzMessage]="durationObject?.durationStr"></nz-alert>
                            <nz-alert *ngIf="!durationObject?.error" nzType="success" [nzMessage]="durationObject?.durationStr"></nz-alert>
                        </div>
                </div>
                
                
            
            </div>
            <div nz-row nzGutter="8" class="rectangle">
            <div >
                 <div class="form-group" nz-col  nzSpan="8"  >
                    <label for="">Pay Qty</label>
                    <nz-input-number formControlName="payQty" [nzMin]="0" [nzStep]="1"></nz-input-number>
                </div>
                <div class="form-group" nz-col  nzSpan="8"  >
                    <label for="">Bill Qty</label>
                    <nz-input-number formControlName="billQty" [nzMin]="0" [nzStep]="1"></nz-input-number>
                 </div>
            </div>
            </div>
    </div>
</div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveDayTime()">OK</button>
        <button nz-button nzType="default" (click)="ViewChangeDayTimeModal=false">Cancel</button>
    </div>
</nz-modal>

<nz-modal [nzStyle]="{ top: '15px' }" [nzWidth]="400" [(nzVisible)]="ViewNudgeModal" nzTitle="Nudge  {{NudgeStatus}}"   (nzOnCancel)="ViewNudgeModal = false" >
    <div  class="flexy" style="min-height:10rem;" >
        <div nz-row nzGutter="8">
            <div nz-row style="padding-top: 10px; padding-left: 5px; ">
                <div  nz-col  nzSpan="24"  >
                    <nz-label style="margin-left: 3px;" *ngIf="selectedOption">{{selectedOption.startTime}} - {{selectedOption.endTime}} * {{selectedOption.rProgram}} : {{selectedOption.activity}} </nz-label >                                
                                        
                </div>  
                <div  nz-col  nzSpan="24"  style="padding-top: 10px;">
                    <label for="">Enter the number of Minutes to Nudge {{NudgeStatus}}. Must be incrementof minutes</label>                                        
                </div>  
            </div> 
            <div nz-row nzGutter="8" style="padding-top: 10px; padding-left: 5px; ">
            
                 <div class="form-group" nz-col  nzSpan="12"  >                  
                    <nz-input-number [(ngModel)]="NudgeValue" [nzMin]="0" [nzStep]="5"></nz-input-number>
                </div>
              
            
            </div>
    </div>
</div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveNudgeUpDown()">OK</button>
        <button nz-button nzType="default" (click)="ViewNudgeModal=false">Cancel</button>
    </div>
</nz-modal>

<nz-modal [nzStyle]="{ top: '15px' }" [nzWidth]="400" [(nzVisible)]="ViewCaseLoadModal" nzTitle="Case Load Name"   (nzOnCancel)="ViewCaseLoadModal = false" >
    <div  class="flexy" style="min-height:10rem;" >
        <div nz-row nzGutter="8">
            <div nz-row style="padding-top: 10px; padding-left: 5px; ">
                <!-- <div  nz-col  nzSpan="24" class="rectangle" >
                    <nz-label style="margin-left: 3px;" *ngIf="selectedOption">{{selectedOption.startTime}} - {{selectedOption.endTime}} * {{selectedOption.rProgram}} : {{selectedOption.activity}} </nz-label >                                
                                        
                </div>   -->
               
            </div> 
            <div nz-row nzGutter="8"  class="rectangle">
            
                <div  nz-col  nzSpan="24"  style="padding-top: 10px;">
                    <label for="">Enter Case Load Name</label>                                        
                </div>  
                 <div class="form-group" nz-col  nzSpan="22"  >  
                    <input nz-input placeholder="Case Load Name" [(ngModel)]="CaseLoadValue" />
                
                    
                </div>
              
            
            </div>
    </div>
</div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveCaseLoad()">OK</button>
        <button nz-button nzType="default" (click)="ViewCaseLoadModal=false">Cancel</button>
    </div>
</nz-modal>


<nz-modal [nzStyle]="{ top: '5px' }" [nzWidth]="400" [(nzVisible)]="ViewAllocateResourceModal" nzTitle="Day Manager"   (nzOnCancel)="ViewAllocateResourceModal = false" >
    <div  class="flexy" style="min-height:20rem;" >
        <div *ngIf="serviceActivityList">
           <div>
            <nz-input-group [nzSuffix]="suffixIconSearch">
                <input type="text" nz-input [(ngModel)]="txtSearch" (ngModelChange)="onTextChangeEvent($event)" placeholder="input search text" (change)="onTextChangeEvent($event)"/>
              </nz-input-group>
              <ng-template #suffixIconSearch>
                <i nz-icon nzType="search"></i>
              </ng-template>
            <!-- <input id="txtSubject"  style="margin-top: 5px;" nz-input [(ngModel)]="txtSearch"/> -->
           </div>
            <nz-table #basicTable [nzShowPagination]="false" [nzSize]="'small'" [nzFrontPagination]="false" [nzLoading]="loading"
                [nzData]="serviceActivityList"  style="height: 400px; width: 340px;"  [nzScroll]="{ y: '380px'}">
                <thead>
                    <tr>
                        <th class="left">Select {{resourceType}}</th>                                 
                        
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of serviceActivityList;let i = index;"  (click)="onItemSelected(data,i)" 
                    (dblclick)="onItemDbClick(data,i)" [ngStyle]="{'backgroundColor': i == HighlightRow2 ? '#bbd7fa'  : 'white' }">
                        <td class="left">                                     
                                {{ data.description  }}                                      
                           
                        </td>
                    </tr>
                </tbody>
            </nz-table> 
        
    </div>            
    
</div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveAllocateResource()">OK</button>
        <button nz-button nzType="default" (click)="ViewAllocateResourceModal=false">Cancel</button>
    </div>
</nz-modal>


<nz-modal [nzStyle]="{ top: '15px' }" [nzWidth]="400" [(nzVisible)]="ViewAllocateResourceQtyModal" nzTitle="Day Manager "   (nzOnCancel)="ViewAllocateResourceQtyModal = false" >
    <div  class="flexy" style="min-height:10rem;" >
        <div nz-row nzGutter="8">
            <div nz-row style="padding-top: 10px; padding-left: 5px; ">
              
            </div> 
            <div nz-row nzGutter="8"  class="rectangle">
            
                <div  nz-col  nzSpan="24"  style="padding-top: 10px;">
                    <label for="">Enter new {{resourceType}}</label>                                        
                </div>  
                 <div class="form-group" nz-col  nzSpan="24"  >  
                    
                    <nz-input-number *ngIf="InputMode!='decimal'"  placeholder="0" [(ngModel)]="ResourceValue"  [nzMin]="0" [nzStep]="1" 
                  
                    ></nz-input-number>
                   
                    
                    <input *ngIf="InputMode=='decimal'"
                    nz-input
                    style="width:100px"
                    type="number"
                    name="myDecimal"
                    placeholder="0.00"
                    [(ngModel)]="ResourceValue"
                    ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/"
                    step="0.1"
                    />
                </div>
              
            
            </div>
    </div>
</div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="SaveAllocateResource()">OK</button>
        <button nz-button nzType="default" (click)="ViewAllocateResourceQtyModal=false">Cancel</button>
    </div>
</nz-modal>

<nz-modal [nzStyle]="{ top: '15px' }"  hasBackdrop [nzWidth]="470" [(nzVisible)]="AddRosterModel" nzTitle="Day Manager "   (nzOnCancel)="AddRosterModel = false" >
    <div  class="flexy" style="min-height:20rem;" >
        <dm-roster  [loadRoster]="loadingRoster" (RosterDone)="load_rosters()" (reLoadGrid)="reLoadGridRosterModel()" ></dm-roster>    
    </div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="AddRosterModel=false">OK</button>
        <button nz-button nzType="default" (click)="AddRosterModel=false">Cancel</button>
    </div>
</nz-modal>